# Анализ паттернов из v0.dev репозиториев

## Обнаруженные паттерны

### 1. Структура проекта

Все репозитории следуют единой структуре:

```
project/
├── app/                    # Next.js App Router
│   ├── layout.tsx         # Root layout с SidebarProvider
│   ├── globals.css        # Глобальные стили
│   └── [page]/            # Страницы
├── components/
│   ├── app-sidebar.tsx    # Основной sidebar компонент
│   ├── theme-provider.tsx # Провайдер темы
│   └── ui/                # shadcn/ui компоненты
├── hooks/
│   └── use-mobile.ts      # Хук для определения мобильных устройств
├── lib/
│   └── utils.ts           # Утилиты (cn функция)
└── components.json        # Конфигурация shadcn/ui
```

### 2. Паттерны Sidebar

#### 2.1 Базовый паттерн (v0-sidebar-layout)

- `SidebarProvider` оборачивает всё приложение
- `AppSidebar` - отдельный компонент с логикой
- `SidebarHeader` для поиска и версионирования
- `SidebarGroup` для группировки элементов
- `SidebarRail` для визуального разделителя

#### 2.2 File Tree паттерн (v0-file-tree-sidebar)

- Рекурсивный компонент `Tree` для вложенных структур
- Использование `Collapsible` для папок
- `SidebarMenuSub` для подменю
- Иконки `File` и `Folder` из lucide-react

#### 2.3 Layout паттерн

```tsx
<SidebarProvider>
  <AppSidebar />
  <SidebarInset>
    <header>
      <SidebarTrigger />
      <Separator />
      <Breadcrumb />
    </header>
    <main>{children}</main>
  </SidebarInset>
</SidebarProvider>
```

### 3. Паттерны таблиц (v0-dynamic-table)

#### 3.1 Динамическая таблица

- Автоматическое определение колонок из данных
- Поддержка поиска, сортировки, фильтрации, группировки
- Пагинация с настраиваемым размером страницы
- Расширяемые группы (Collapsible)

#### 3.2 Фильтры

- Множественные правила фильтрации
- Логические операторы (AND/OR)
- Popover для UI фильтров
- Badge для активных фильтров

### 4. Общие зависимости

Все проекты используют:

- `next: 15.2.4`
- `react: ^19`
- `@radix-ui/*` - полный набор компонентов
- `lucide-react` - иконки
- `tailwindcss: ^4.1.9`
- `vaul: ^0.9.9` - для drawer/sheet
- `@vercel/analytics` - аналитика

### 5. Компоненты для интеграции

#### 5.1 Breadcrumb

- Навигация по иерархии
- Используется в header вместе с SidebarTrigger

#### 5.2 SearchForm

- Поиск в sidebar
- Использует `SidebarInput` и `SidebarGroup`

#### 5.3 VersionSwitcher

- Переключение версий/окружений
- DropdownMenu в SidebarHeader

## План интеграции в R2R-Application

### Этап 1: Улучшение структуры sidebar

1. **Создать `components/AppSidebar.tsx`**

   - Вынести логику sidebar из `pages/manage.tsx`
   - Использовать паттерн с `SidebarGroup` для коллекций
   - Добавить `SidebarHeader` с поиском

2. **Добавить Breadcrumb**

   - Установить компонент breadcrumb из shadcn/ui
   - Использовать в header страницы manage

3. **Улучшить навигацию**
   - Добавить иконки для элементов меню
   - Использовать `SidebarMenuBadge` для счетчиков

### Этап 2: Улучшение таблиц

1. **Создать `components/DynamicTable.tsx`**

   - Адаптировать логику из v0-dynamic-table
   - Интегрировать с существующими данными документов
   - Добавить фильтры, сортировку, группировку

2. **Улучшить DocumentsTable**
   - Использовать DynamicTable как основу
   - Добавить расширенные фильтры
   - Улучшить пагинацию

### Этап 3: Дополнительные компоненты

1. **SearchForm в Sidebar**

   - Добавить поиск коллекций в sidebar
   - Использовать `SidebarInput`

2. **VersionSwitcher (опционально)**
   - Для переключения окружений/версий API

### Этап 4: Обновление зависимостей

1. **Проверить версии**
   - Обновить до совместимых версий
   - Убедиться в совместимости с текущим проектом

## Рекомендации

1. **Постепенная интеграция**

   - Начать с улучшения sidebar
   - Затем улучшить таблицы
   - Добавить дополнительные компоненты

2. **Сохранение существующей функциональности**

   - Не ломать текущую логику
   - Адаптировать паттерны под существующий код

3. **Тестирование**
   - Проверять каждое изменение
   - Убедиться в работоспособности всех функций
